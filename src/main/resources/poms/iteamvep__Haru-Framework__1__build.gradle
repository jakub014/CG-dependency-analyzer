

plugins {
  id "com.bmuschko.nexus" version "2.3.1"
}
//plugins {
//  id "com.jfrog.bintray" version "1.8.5"
//}
//print project.pluginManager.hasPlugin('com.jfrog.bintray')

//plugins {
//  id "io.codearte.nexus-staging" version "0.22.0"
//}

//https://www.albertgao.xyz/2018/01/18/how-to-publish-artifact-to-maven-central-via-gradle/
//https://liangshuang.name/2017/08/15/upload-to-maven-central/
//https://semver.org/lang/zh-CN/
group = "org.iharu.bootstrap"
archivesBaseName = "haru-base"
version = "0.1-beta"

jar {
    enabled = true
    baseName = 'base-support'
//    classifier = ''
    manifest {
        attributes 'Implementation-Title': 'iHaru Framework Bootstrap', 'Implementation-Version': version
    }
}

dependencies {
    compileOnly group: 'org.aspectj', name: 'aspectjweaver', version: '1.9.1'
    compileOnly group: 'javax.servlet', name: 'javax.servlet-api', version: '4.0.0'
    compile group: 'javax.annotation', name: 'javax.annotation-api', version: '1.3.2'
    
    //Commons Utils
        compile group: 'commons-io', name: 'commons-io', version: '2.6'
        compile group: 'org.apache.commons', name: 'commons-lang3', version: '3.8.1'
        compile group: 'com.google.guava', name: 'guava', version: '27.1-jre'
        
        //Cache
//        compile group: 'com.github.ben-manes.caffeine', name: 'caffeine', version: '2.8.1'

        //HttpClient
        compile group: 'org.apache.httpcomponents.core5', name: 'httpcore5', version: '5.0-beta2'
        compile group: 'org.apache.httpcomponents.client5', name: 'httpclient5', version: '5.0-beta1'
        compile group: 'org.apache.httpcomponents.client5', name: 'httpclient5-fluent', version: '5.0-beta1'
        
        compile group: 'com.squareup.okhttp3', name: 'okhttp', version: '4.1.0'
        
        compile group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: '2.9.4'
        compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.9.4'
        compile group: 'com.fasterxml.jackson.core', name: 'jackson-annotations', version: '2.9.4'
        compile group: 'com.flipkart.zjsonpatch', name: 'zjsonpatch', version: '0.4.3'
        
        compile group: 'com.google.code.gson', name: 'gson', version: '2.8.5'
        
        compile group: 'javax.validation', name: 'validation-api', version: '2.0.1.Final'

}

javadoc {
    options.encoding = 'UTF-8'
    options.tags = [ "attr" ] 
}

modifyPom {
    project {
        name 'Haru Framework'
        packaging 'jar'
        // optionally artifactId can be defined here 
        description 'A toolset for develop application.'
        url 'https://github.com/iteamvep/Haru-Framework'
        inceptionYear '2020'

        scm {
          connection 'scm:https://github.com/iteamvep/Haru-Framework.git'
          developerConnection 'scm:git://github.com/iteamvep/Haru-Framework.git'
          url 'https://github.com/iteamvep/Haru-Framework'
        }

        licenses {
          license {
            name 'The Apache License, Version 2.0'
            url 'http://www.apache.org/licenses/LICENSE-2.0.txt'
          }
        }

        developers {
          developer {
            id 'VEP'
            name 'iTeamVEP'
            email 'x517138883@gmail.com'
          }
        }
    }
}

extraArchive {
    sources = true
    tests = true
    javadoc = true
}

nexus {
    sign = true
    repositoryUrl = 'https://oss.sonatype.org/service/local/staging/deploy/maven2/'
    snapshotRepositoryUrl = 'https://oss.sonatype.org/content/repositories/snapshots/'
}

//bintray {
//   user = properties.getProperty("bintray.user")
//   key = properties.getProperty("bintray.apikey")
//
//   pkg {
//       repo = 'maven'
//       name = 'Haru Framework'
//       configurations = ['archives']
//       desc = 'A toolset for develop application.'
//       websiteUrl = 'https://github.com/iteamvep/Haru-Framework'
//       vcsUrl = 'https://github.com/iteamvep/Haru-Framework.git'
//       licenses = ["Apache-2.0"]
//       publish = true
//       publicDownloadNumbers = true
//   }
//}

//nexusStaging {
//    packageGroup = "org.iharu" //optional if packageGroup == project.getGroup()
////    stagingProfileId = "" //when not defined will be got from server using "packageGroup"
//}

