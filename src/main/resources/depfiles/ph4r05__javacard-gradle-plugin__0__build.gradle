buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'org.kt3k.gradle.plugin:coveralls-gradle-plugin:2.8.3'
        classpath 'org.jacoco:org.jacoco.core:0.8.5'
        classpath 'com.github.dcendents:android-maven-gradle-plugin:1.4.1'
        classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.0'
    }
}

allprojects {
    apply plugin: 'base'
    apply plugin: 'jacoco'
    apply plugin: 'com.github.kt3k.coveralls'
    apply plugin: 'groovy'

    repositories {
        jcenter()
    }

    jacoco {
        toolVersion = '0.8.5'
    }
}

//subprojects {
//    apply plugin: 'java'
//
//    jacocoTestReport {
//        reports {
//            html.enabled = true
//            xml.enabled = true
//            csv.enabled = false
//        }
//        afterEvaluate {
//            classDirectories = files(classDirectories.files.collect {
//                fileTree(dir: it,
//                        exclude: [
//                                '**/pro/**',
//                                '**/jnasmartcardio/**',
//                                '**/apdu4j/**'
//                        ])
//
//            })
//        }
//    }
//}
//
//task jacocoRootReport(type: org.gradle.testing.jacoco.tasks.JacocoReport) {
//    dependsOn = subprojects.test
//    sourceDirectories = files(subprojects.sourceSets.main.allSource.srcDirs)
//    classDirectories = files(subprojects.sourceSets.main.output)
//    executionData = files(subprojects.jacocoTestReport.executionData)
//    reports {
//        html.enabled = true
//        xml.enabled = true
//        csv.enabled = false
//        xml.destination = "${buildDir}/reports/jacoco/examples/jacocoTestReport.xml"
//    }
//    afterEvaluate {
//        classDirectories = files(classDirectories.files.collect {
//            fileTree(dir: it,
//                    exclude: [
//                            '**/pro/**',
//                            '**/jnasmartcardio/**',
//                            '**/apdu4j/**'
//                    ])
//
//        })
//    }
//}
